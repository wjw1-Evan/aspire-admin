---
description: ä»£ç å®¡æŸ¥å’Œè´¨é‡ä¿è¯è§„èŒƒ
globs: *.cs,*.ts,*.tsx,*.js,*.jsx
---

# ä»£ç å®¡æŸ¥å’Œè´¨é‡ä¿è¯è§„èŒƒ

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

**æ‰€æœ‰ä»£ç å˜æ›´å¿…é¡»ç»è¿‡ä¸¥æ ¼çš„å®¡æŸ¥æµç¨‹ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€å®‰å…¨æ€§å’Œä¸€è‡´æ€§**

## âœ… ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•

### å®‰å…¨æ€§æ£€æŸ¥
- [ ] éªŒè¯æ‰€æœ‰ç”¨æˆ·è¾“å…¥ï¼ˆSQL æ³¨å…¥ã€XSS é˜²æŠ¤ï¼‰
- [ ] æ£€æŸ¥æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼ˆAPI å¯†é’¥ã€å¯†ç ç­‰ï¼‰
- [ ] ç¡®è®¤æƒé™éªŒè¯æ­£ç¡®å®ç°
- [ ] éªŒè¯å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»
- [ ] æ£€æŸ¥ JWT Token å®‰å…¨é…ç½®

### å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»æ£€æŸ¥
- [ ] æ‰€æœ‰ä¸šåŠ¡æ•°æ®éƒ½æœ‰ CompanyId
- [ ] ä½¿ç”¨ BaseRepository è¿›è¡Œç§Ÿæˆ·è¿‡æ»¤
- [ ] æ²¡æœ‰å…¨å±€æ•°æ®åˆ›å»ºï¼ˆMenu é™¤å¤–ï¼‰
- [ ] è·¨ä¼ä¸šæ“ä½œæœ‰é€‚å½“çš„å®‰å…¨æ£€æŸ¥
- [ ] ç”¨æˆ·æ³¨å†Œæ—¶æ­£ç¡®åˆ›å»ºä¼ä¸šä¸“å±æ•°æ®

### ä»£ç è´¨é‡æ£€æŸ¥
- [ ] éµå¾ªé¡¹ç›®ç¼–ç è§„èŒƒï¼ˆTypeScriptã€C#ï¼‰
- [ ] ä½¿ç”¨ BaseApiController ç»§æ‰¿
- [ ] é”™è¯¯å¤„ç†ä½¿ç”¨ç»Ÿä¸€ä¸­é—´ä»¶
- [ ] æ²¡æœ‰ç¡¬ç¼–ç çš„é…ç½®å€¼
- [ ] é€‚å½“çš„æ—¥å¿—è®°å½•å’Œç›‘æ§

### API è®¾è®¡æ£€æŸ¥
- [ ] RESTful API è®¾è®¡åŸåˆ™
- [ ] ç»Ÿä¸€çš„å“åº”æ ¼å¼
- [ ] å®Œæ•´çš„ XML æ–‡æ¡£æ³¨é‡Š
- [ ] é€‚å½“çš„ HTTP çŠ¶æ€ç 
- [ ] è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†

### å‰ç«¯ä»£ç æ£€æŸ¥
- [ ] TypeScript ç±»å‹å®šä¹‰å®Œæ•´
- [ ] ç»„ä»¶ Props æ¥å£å®šä¹‰
- [ ] é”™è¯¯è¾¹ç•Œå’Œå¼‚å¸¸å¤„ç†
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆmemoã€useMemoï¼‰
- [ ] æ— éšœç¢è®¿é—®æ”¯æŒ

## ğŸ” å®¡æŸ¥æµç¨‹

### 1. è‡ªåŠ¨åŒ–æ£€æŸ¥
```bash
# åç«¯ä»£ç æ£€æŸ¥
dotnet build
dotnet test
dotnet format --verify-no-changes

# å‰ç«¯ä»£ç æ£€æŸ¥
npm run lint
npm run type-check
npm run test
```

### 2. äººå·¥å®¡æŸ¥è¦ç‚¹

#### æ¶æ„ä¸€è‡´æ€§
- æ˜¯å¦ç¬¦åˆé¡¹ç›®æ•´ä½“æ¶æ„
- æ˜¯å¦æ­£ç¡®ä½¿ç”¨è®¾è®¡æ¨¡å¼
- æ˜¯å¦éµå¾ªåˆ†å±‚æ¶æ„åŸåˆ™

#### ä¸šåŠ¡é€»è¾‘æ­£ç¡®æ€§
- ä¸šåŠ¡è§„åˆ™å®ç°æ˜¯å¦æ­£ç¡®
- è¾¹ç•Œæ¡ä»¶å¤„ç†æ˜¯å¦å®Œæ•´
- å¼‚å¸¸æƒ…å†µå¤„ç†æ˜¯å¦åˆç†

#### æ€§èƒ½è€ƒè™‘
- æ•°æ®åº“æŸ¥è¯¢æ˜¯å¦ä¼˜åŒ–
- æ˜¯å¦æœ‰ä¸å¿…è¦çš„é‡å¤è¯·æ±‚
- å‰ç«¯æ¸²æŸ“æ€§èƒ½æ˜¯å¦è‰¯å¥½

## ğŸš« å¸¸è§é—®é¢˜æ£€æŸ¥

### å®‰å…¨é—®é¢˜
```csharp
// âŒ ç¦æ­¢ï¼šç›´æ¥æ‹¼æ¥ SQL
var query = $"SELECT * FROM users WHERE name = '{userInput}'";

// âœ… æ­£ç¡®ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
var filter = Builders<User>.Filter.Eq(u => u.Name, userInput);
```

### å¤šç§Ÿæˆ·é—®é¢˜
```csharp
// âŒ ç¦æ­¢ï¼šåˆ›å»ºå…¨å±€æ•°æ®
var notice = new Notice { Title = "ç³»ç»Ÿé€šçŸ¥" };

// âœ… æ­£ç¡®ï¼šè®¾ç½® CompanyId
var notice = new Notice 
{ 
    Title = "ä¼ä¸šé€šçŸ¥", 
    CompanyId = GetRequiredCompanyId() 
};
```

### é”™è¯¯å¤„ç†é—®é¢˜
```csharp
// âŒ ç¦æ­¢ï¼šæ‰‹åŠ¨ try-catch
try
{
    var result = await _service.DoSomething();
    return Ok(new { success = true, data = result });
}
catch (Exception ex)
{
    return StatusCode(500, new { success = false, error = ex.Message });
}

// âœ… æ­£ç¡®ï¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç”±ä¸­é—´ä»¶å¤„ç†
var result = await _service.DoSomething();
return Success(result);
```

## ğŸ“‹ å®¡æŸ¥å·¥å…·é…ç½®

### ESLint é…ç½®æ£€æŸ¥
```json
// Platform.Admin/.eslintrc.js
{
  "extends": ["@umijs/fabric/dist/eslint"],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/explicit-function-return-type": "warn"
  }
}
```

### Biome é…ç½®æ£€æŸ¥
```json
// Platform.Admin/biome.json
{
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true,
      "correctness": {
        "noUnusedVariables": "error"
      }
    }
  }
}
```

### .NET ä»£ç åˆ†æ
```xml
<!-- Platform.ApiService/Platform.ApiService.csproj -->
<PropertyGroup>
  <EnableNETAnalyzers>true</EnableNETAnalyzers>
  <AnalysisMode>All</AnalysisMode>
</PropertyGroup>
```

## ğŸ¯ è´¨é‡æŒ‡æ ‡

### ä»£ç è¦†ç›–ç‡
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- å…³é”®ä¸šåŠ¡é€»è¾‘è¦†ç›–ç‡ > 95%
- API ç«¯ç‚¹æµ‹è¯•è¦†ç›–ç‡ > 90%

### æ€§èƒ½æŒ‡æ ‡
- API å“åº”æ—¶é—´ < 200ms
- æ•°æ®åº“æŸ¥è¯¢æ—¶é—´ < 100ms
- å‰ç«¯é¡µé¢åŠ è½½æ—¶é—´ < 2s

### å®‰å…¨æŒ‡æ ‡
- é›¶å®‰å…¨æ¼æ´
- æ‰€æœ‰è¾“å…¥éªŒè¯é€šè¿‡
- æƒé™æ£€æŸ¥ 100% è¦†ç›–

## ğŸ“š ç›¸å…³èµ„æº

- [ä»£ç å®¡æŸ¥æœ€ä½³å®è·µ](https://github.com/microsoft/vscode/wiki/Code-Review-Guidelines)
- [.NET ä»£ç åˆ†æè§„åˆ™](https://docs.microsoft.com/en-us/dotnet/fundamentals/code-analysis/)
- [TypeScript ä¸¥æ ¼æ¨¡å¼](https://www.typescriptlang.org/tsconfig#strict)
- [React æ€§èƒ½ä¼˜åŒ–æŒ‡å—](https://react.dev/learn/render-and-commit)

## ğŸ¯ è®°ä½

**è´¨é‡ä¸æ˜¯æ£€æŸ¥å‡ºæ¥çš„ï¼Œè€Œæ˜¯è®¾è®¡å‡ºæ¥çš„**

- åœ¨ç¼–å†™ä»£ç æ—¶å°±è¦è€ƒè™‘è´¨é‡
- ä½¿ç”¨å·¥å…·è‡ªåŠ¨åŒ–æ£€æŸ¥
- å»ºç«‹ä»£ç å®¡æŸ¥æ–‡åŒ–
- æŒç»­æ”¹è¿›å’Œä¼˜åŒ–