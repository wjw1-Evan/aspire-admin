<view class="container">
  <!-- Breadcrumb / Header Navigation -->
  <view class="nav-header card-style">
    <view class="breadcrumb">
      <view class="bread-item {{pathStack.length === 0 ? 'active' : ''}}" bindtap="navToRoot">å…¨éƒ¨æ–‡ä»¶</view>
      <block wx:for="{{pathStack}}" wx:key="id">
        <text class="separator">/</text>
        <view class="bread-item {{index === pathStack.length - 1 ? 'active' : ''}}" bindtap="navToFolder" data-index="{{index}}">{{item.name}}</view>
      </block>
    </view>
  </view>

  <loading wx:if="{{loading && !isRefreshing}}" />

  <!-- File List -->
  <scroll-view scroll-y class="file-list-scroll">
    <view class="file-list" wx:if="{{fileList.length > 0}}">
      <view 
        class="file-item" 
        wx:for="{{fileList}}" 
        wx:key="id" 
        bindtap="onItemClick" 
        bindlongpress="onItemLongPress"
        data-item="{{item}}"
      >
        <view class="file-icon {{item.type === 1 ? 'folder' : 'file'}}">
           <text wx:if="{{item.type === 1}}">ğŸ“</text>
           <text wx:else>{{item.icon || 'ğŸ“„'}}</text>
        </view>
        <view class="file-info">
          <text class="file-name">{{item.name}}</text>
          <view class="file-meta">
            <text class="file-date">{{item.displayTime}}</text>
            <text class="file-size" wx:if="{{item.type === 0}}">{{item.displaySize}}</text>
          </view>
        </view>
        <view class="file-action" catchtap="showActionMenu" data-item="{{item}}">
          <text class="action-dots">...</text>
        </view>
      </view>
    </view>

    <!-- Empty State -->
    <view class="empty-state" wx:elif="{{!loading}}">
      <view class="empty-icon">ğŸ“‚</view>
      <text>å½“å‰ç›®å½•ä¸‹ç©ºç©ºå¦‚ä¹Ÿ</text>
    </view>
  </scroll-view>

  <!-- Floating Action Buttons -->
  <view class="fab-group">
    <view class="fab-btn main-fab" bindtap="toggleFab">
      <text class="fab-icon {{showFabMenu ? 'rotate' : ''}}">+</text>
    </view>
    
    <view class="fab-menu {{showFabMenu ? 'show' : ''}}">
      <view class="fab-item" bindtap="uploadImage">
        <view class="fab-item-icon bg-blue">ğŸ–¼ï¸</view>
        <text class="fab-item-text">ä¸Šä¼ å›¾ç‰‡</text>
      </view>
      <view class="fab-item" bindtap="uploadFile">
        <view class="fab-item-icon bg-orange">æ–‡æ¡£</view>
        <text class="fab-item-text">å¾®ä¿¡æ–‡ä»¶</text>
      </view>
      <view class="fab-item" bindtap="showCreateFolder">
        <view class="fab-item-icon bg-green">ğŸ“</view>
        <text class="fab-item-text">æ–°å»ºç›®å½•</text>
      </view>
    </view>
  </view>

  <!-- Create Folder Dialog -->
  <view class="modal-mask" wx:if="{{showFolderModal}}" bindtap="closeFolderModal">
    <view class="modal-content" catchtap="prevent">
      <view class="modal-header">æ–°å»ºæ–‡ä»¶å¤¹</view>
      <input 
        class="modal-input" 
        placeholder="è¯·è¾“å…¥æ–‡ä»¶å¤¹åç§°" 
        focus="{{showFolderModal}}"
        bindinput="onFolderNameInput"
        value="{{newFolderName}}"
      />
      <view class="modal-footer">
        <button class="btn-cancel" bindtap="closeFolderModal">å–æ¶ˆ</button>
        <button class="btn-confirm" bindtap="confirmCreateFolder">ç¡®è®¤</button>
      </view>
    </view>
  </view>
</view>
