<view class="container">
  <!-- Header Section -->
  <view class="dashboard-header">
    <view class="user-profile">
      <view class="greeting">
        <text class="hi">{{t['home.hi']}}</text>
        <text class="user-name">{{userInfo.name || (t['tab.profile'])}}</text>
      </view>
      <text class="sub-greeting">{{t['home.welcome']}} {{userInfo.currentCompanyDisplayName || (t['home.subtitle'])}}</text>
      <text class="company-subtitle" wx:if="{{userInfo.currentCompanyName}}">{{userInfo.currentCompanyName}}</text>
    </view>
    <view class="date-badge">{{currentDate}}</view>
  </view>

  <!-- Stats Grid -->
  <view class="stats-grid">
    <view class="stat-card" bindtap="navigateToTask">
      <view class="stat-content">
        <text class="stat-num color-primary">{{todoTasks || 0}}</text>
        <text class="stat-title">{{t['home.stats.tasks']}}</text>
      </view>
      <view class="stat-icon icon-bg-primary">
        <text class="iconfont icon-task"></text>
      </view>
    </view>
    <view class="stat-card" bindtap="navigateToProject">
      <view class="stat-content">
        <text class="stat-num color-success">{{activeProjects || 0}}</text>
        <text class="stat-title">{{t['home.stats.projects']}}</text>
      </view>
      <view class="stat-icon icon-bg-success">
        <text class="iconfont icon-project"></text>
      </view>
    </view>
  </view>

  <!-- Rapid Actions -->
  <view class="panel">
    <view class="panel-header">
      <text class="panel-title">{{t['home.functions']}}</text>
      <text class="panel-more" bindtap="switchTabToApps">{{t['home.view_all']}}</text>
    </view>
    <view class="action-grid">
      <view class="action-item" bindtap="navigateToProject">
        <view class="action-box bg-blue">
          <text class="iconfont icon-project"></text>
        </view>
        <text class="action-name">{{t['apps.project']}}</text>
      </view>
      <view class="action-item" bindtap="navigateToTask">
        <view class="action-box bg-orange">
          <text class="iconfont icon-task"></text>
        </view>
        <text class="action-name">{{t['apps.task']}}</text>
      </view>
      <view class="action-item" bindtap="navigateToStatistics">
        <view class="action-box bg-purple">
          <text class="iconfont icon-statistics"></text>
        </view>
        <text class="action-name">{{t['apps.statistics']}}</text>
      </view>
      <view class="action-item" bindtap="navigateToProfile">
        <view class="action-box bg-green">
          <text class="iconfont icon-profile"></text>
        </view>
        <text class="action-name">{{t['tab.profile']}}</text>
      </view>
    </view>
  </view>

  <view class="panel">
    <view class="panel-header">
      <text class="panel-title">{{t['home.announcements']}}</text>
      <text class="panel-more" bindtap="navigateToNotifications">{{t['home.view_all']}}</text>
    </view>
    <view class="msg-list" wx:if="{{notifications.length > 0}}">
      <view 
        class="msg-item" 
        wx:for="{{notifications}}" 
        wx:key="id" 
        bindtap="onNotificationTap" 
        data-item="{{item}}"
      >
        <view class="msg-tag {{item.tagClass}}">{{t[item.tagLabel]}}</view>
        <text class="msg-text {{item.read ? '' : 'unread'}}">{{item.title}}</text>
        <text class="msg-time">{{item.displayTime}}</text>
      </view>
    </view>
    <view class="empty-msg" wx:else>
      <text>{{t['common.empty']}}</text>
    </view>
  </view>
</view>
