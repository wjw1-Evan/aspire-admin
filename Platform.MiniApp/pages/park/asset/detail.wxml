<view class="detail-container">
  <view class="header-card" wx:if="{{building}}">
    <view class="title-row">
      <text class="main-title">{{building.name}}</text>
      <view class="header-actions">
        <text class="iconfont icon-edit" bindtap="goToEdit"></text>
        <text class="iconfont icon-delete" bindtap="handleDelete"></text>
      </view>
    </view>
    <view class="status-row">
      <text class="status-tag">{{building.status}}</text>
    </view>
  </view>

  <view class="section-title">{{t['park.asset.basic_info']}}</view>
  <view class="info-card" wx:if="{{building}}">
    <view class="info-item">
      <text class="label">{{t['park.asset.total_floors']}}</text>
      <text class="value">{{building.totalFloors}}F</text>
    </view>
    <view class="info-item">
      <text class="label">{{t['park.asset.total_area']}}</text>
      <text class="value">{{building.totalArea}}㎡</text>
    </view>
    <view class="info-item">
      <text class="label">{{t['park.asset.building_type']}}</text>
      <text class="value">{{building.buildingType || '-'}}</text>
    </view>
    <view class="info-item">
      <text class="label">{{t['park.asset.built_year']}}</text>
      <text class="value">{{building.yearBuilt || '-'}}</text>
    </view>
    <view class="info-item vertical">
      <text class="label">{{t['park.asset.address']}}</text>
      <text class="value">{{building.address || '-'}}</text>
    </view>
  </view>

  <view class="section-title" wx:if="{{building.description}}">{{t['park.asset.building_desc']}}</view>
  <view class="info-card" wx:if="{{building.description}}">
    <view class="info-item vertical">
      <text class="value">{{building.description}}</text>
    </view>
  </view>

  <view class="section-title">
    <text>房源单元 ({{units.length}})</text>
    <text class="iconfont icon-add" bindtap="goToAddUnit" style="color: #1890ff; font-weight: normal; font-size: 32rpx;"></text>
  </view>
  
  <view class="units-grid" wx:if="{{units.length > 0}}">
    <view wx:for="{{units}}" wx:key="id" class="unit-wrapper" bindtap="goToUnitDetail" data-id="{{item.id}}">
      <view class="unit-card-compact">
        <view class="unit-card-header">
          <text class="unit-no">{{item.unitNumber}}</text>
          <text class="unit-status-tag status-{{item.status}}">{{item.status === 'Available' ? t['park.asset.status.available'] : (item.status === 'Rented' ? t['park.asset.status.rented'] : t['park.asset.status.reserved'])}}</text>
        </view>
        <view class="unit-card-body">
          <text>{{item.floor}}F | {{item.area}}㎡</text>
          <text class="unit-price" wx:if="{{item.monthlyRent}}">¥{{item.monthlyRent}}</text>
        </view>
      </view>
    </view>
  </view>
  
  <view class="empty-hint" wx:if="{{!loading && units.length === 0}}">
    <text>{{t['park.asset.no_units']}}</text>
  </view>

  <view class="bottom-placeholder"></view>

  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading"></view>
  </view>
</view>
