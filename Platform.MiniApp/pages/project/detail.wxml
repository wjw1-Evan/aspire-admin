<view class="detail-container" wx:if="{{project}}">
  <view class="header-card">
    <view class="title-row">
      <text class="main-title">{{project.name}}</text>
      <view class="header-actions">
        <text class="iconfont icon-edit" bindtap="goToEdit"></text>
        <text class="iconfont icon-delete" bindtap="handleDelete"></text>
      </view>
    </view>
    <view class="status-row">
      <text class="status-tag status-{{project.status}}">{{statusMap[project.status]}}</text>
    </view>
    
    <view class="progress-section">
      <view class="progress-info">
        <text>总体进度</text>
        <text class="percent">{{project.progress}}%</text>
      </view>
      <progress 
        percent="{{project.progress}}" 
        stroke-width="8" 
        color="#1890ff" 
        active 
        border-radius="4"
      />
    </view>

    <view class="action-bar">
      <button class="btn-outline" bindtap="viewProjectTasks">查看相关任务</button>
      <button class="btn-primary" bindtap="goToCreateTask">新建任务</button>
    </view>
  </view>

  <view class="section-title">基本信息</view>
  <view class="info-card">
    <view class="info-item">
      <text class="label">负责人</text>
      <text class="value">{{project.managerName || '未指定'}}</text>
    </view>
    <view class="info-item">
      <text class="label">优先级</text>
      <text class="priority-tag priority-{{project.priority}}">{{priorityMap[project.priority]}}</text>
    </view>
    <view class="info-item">
      <text class="label">开始日期</text>
      <text class="value">{{project.startDate || '-'}}</text>
    </view>
    <view class="info-item">
      <text class="label">截止日期</text>
      <text class="value">{{project.endDate || '-'}}</text>
    </view>
  </view>

  <view class="section-title">项目描述</view>
  <view class="info-card">
    <view class="info-item vertical">
      <text class="value">{{project.description || '暂无描述信息'}}</text>
    </view>
  </view>

  <view class="section-title">项目成员 ({{members.length}})</view>
  <view class="info-card">
    <view class="member-item" wx:for="{{members}}" wx:key="userId">
      <image class="member-avatar" src="{{item.avatar || '/assets/logo.png'}}" mode="aspectFill"></image>
      <view class="member-info">
        <text class="member-name">{{item.name}}</text>
        <text class="member-role">{{item.role || '成员'}}</text>
      </view>
    </view>
    <view class="empty-members" wx:if="{{members.length === 0}}">暂无项目成员</view>
  </view>

  <view class="bottom-placeholder"></view>
</view>

<view class="loading-state" wx:else>
  <view class="loading-icon"></view>
  <text>加载中...</text>
</view>
