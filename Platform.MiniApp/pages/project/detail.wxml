<view class="detail-container" wx:if="{{project}}">
  <view class="header-card">
    <view class="title-row">
      <text class="main-title">{{project.name}}</text>
      <view class="header-actions">
        <text class="iconfont icon-edit" bindtap="goToEdit"></text>
        <text class="iconfont icon-delete" bindtap="handleDelete"></text>
      </view>
    </view>
    <view class="status-row">
      <text class="status-tag status-{{project.status}}">{{statusMap[project.status]}}</text>
    </view>
    
    <view class="progress-section">
      <view class="progress-info">
        <text>{{t['project.detail.overall_progress']}}</text>
        <text class="percent">{{project.progress}}%</text>
      </view>
      <progress 
        percent="{{project.progress}}" 
        stroke-width="8" 
        color="#1890ff" 
        active 
        border-radius="4"
      />
    </view>

    <view class="action-bar">
      <button class="btn-outline" bindtap="viewProjectTasks">{{t['project.detail.view_tasks']}}</button>
      <button class="btn-primary" bindtap="goToCreateTask">{{t['project.detail.create_task']}}</button>
    </view>
  </view>

  <view class="section-title">{{t['project.detail.basic_info']}}</view>
  <view class="info-card">
    <view class="info-item">
      <text class="label">{{t['project.detail.manager']}}</text>
      <text class="value">{{project.managerName || t['project.detail.unassigned']}}</text>
    </view>
    <view class="info-item">
      <text class="label">{{t['project.detail.priority_label']}}</text>
      <text class="priority-tag priority-{{project.priority}}">{{priorityMap[project.priority]}}</text>
    </view>
    <view class="info-item">
      <text class="label">{{t['project.detail.start_date']}}</text>
      <text class="value">{{project.startDate || '-'}}</text>
    </view>
    <view class="info-item">
      <text class="label">{{t['project.detail.end_date']}}</text>
      <text class="value">{{project.endDate || '-'}}</text>
    </view>
  </view>

  <view class="section-title">{{t['project.detail.description']}}</view>
  <view class="info-card">
    <view class="info-item vertical">
      <text class="value">{{project.description || t['project.detail.no_description']}}</text>
    </view>
  </view>

  <view class="section-title">{{t['project.detail.members']}} ({{members.length}})</view>
  <view class="info-card">
    <view class="member-item" wx:for="{{members}}" wx:key="userId">
      <image class="member-avatar" src="{{item.avatar || '/assets/logo.png'}}" mode="aspectFill"></image>
      <view class="member-info">
        <text class="member-name">{{item.name}}</text>
        <text class="member-role">{{item.role || t['project.detail.member_role']}}</text>
      </view>
    </view>
    <view class="empty-members" wx:if="{{members.length === 0}}">{{t['project.detail.no_members']}}</view>
  </view>

  <view class="bottom-placeholder"></view>
</view>

<view class="loading-state" wx:else>
  <view class="loading-icon"></view>
  <text>{{t['project.detail.loading']}}</text>
</view>
