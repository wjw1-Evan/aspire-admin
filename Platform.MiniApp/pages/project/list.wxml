<view class="container">
  <!-- Statistics Dashboard -->
  <view class="stats-board card-style" wx:if="{{statistics}}">
    <view class="stats-row">
      <view class="stat-item">
        <text class="stat-value primary">{{statistics.totalProjects || 0}}</text>
        <text class="stat-label">{{t['project.list.total']}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-value success">{{statistics.inProgressProjects || 0}}</text>
        <text class="stat-label">{{t['project.list.in_progress']}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-value warning">{{statistics.completedProjects || 0}}</text>
        <text class="stat-label">{{t['project.list.completed']}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-value danger">{{statistics.delayedProjects || 0}}</text>
        <text class="stat-label">{{t['project.list.delayed']}}</text>
      </view>
    </view>
  </view>

  <!-- Search Bar -->
  <view class="search-section card-style">
    <view class="search-box">
      <text class="iconfont icon-search search-icon"></text>
      <input 
        class="search-input" 
        placeholder="{{t['project.list.search_placeholder']}}" 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        confirm-type="search"
        bindconfirm="handleSearch"
      />
    </view>
  </view>

  <!-- Project List -->
  <view class="project-list">
    <block wx:if="{{projects.length > 0}}">
      <view 
        class="project-card card-style" 
        wx:for="{{projects}}" 
        wx:key="id"
        bindtap="goToDetail"
        data-id="{{item.id}}"
      >
        <view class="card-header">
          <text class="project-title">{{item.name}}</text>
          <view class="status-tag status-{{item.status}}">{{statusMap[item.status]}}</view>
        </view>
        
        <view class="card-body">
          <view class="info-row">
            <text class="label">{{t['project.list.manager']}}</text>
            <text class="value">{{item.managerName || t['project.list.manager_unassigned']}}</text>
          </view>
          <view class="info-row">
            <text class="label">{{t['project.list.deadline']}}</text>
            <text class="value">{{item.endDate || '-'}}</text>
          </view>
          
          <view class="progress-section">
            <view class="progress-info">
              <text class="label">{{t['project.list.progress']}}</text>
              <text class="percent">{{item.progress}}%</text>
            </view>
            <progress 
              percent="{{item.progress}}" 
              stroke-width="6" 
              color="{{item.progress >= 100 ? '#52c41a' : '#1890ff'}}" 
              border-radius="4"
            />
          </view>
        </view>
      </view>
    </block>
    
    <!-- Empty State -->
    <view class="empty-state" wx:else>
      <image src="/assets/logo.png" mode="aspectFit" class="empty-icon"></image>
      <text class="empty-text">{{t['project.list.no_data']}}</text>
    </view>

    <!-- Loading More -->
    <view class="loading-more" wx:if="{{loading}}">{{t['project.list.loading_more']}}</view>
    <view class="no-more" wx:if="{{!hasMore && projects.length > 0}}">{{t['project.list.no_more']}}</view>
  </view>

  <view class="fab-btn" bindtap="goToCreate">
    <text class="iconfont icon-plus"></text>
  </view>
</view>
