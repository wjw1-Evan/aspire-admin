<view class="detail-container" wx:if="{{task}}">
  <view class="header-card">
    <view class="title-row">
      <text class="main-title">{{task.taskName}}</text>
      <view class="header-actions">
        <text class="iconfont icon-edit" bindtap="goToEdit"></text>
        <text class="iconfont icon-delete" bindtap="handleDelete"></text>
      </view>
    </view>
    <view class="status-row">
      <text class="status-tag status-{{task.status}}">{{statusMap[task.status]}}</text>
      <text class="task-id">ID: {{task.id}}</text>
    </view>
    
    <view class="progress-section">
      <view class="progress-info">
        <text>{{t['task.detail.progress']}}</text>
        <text class="percent">{{task.completionPercentage}}%</text>
      </view>
      <progress 
        percent="{{task.completionPercentage}}" 
        stroke-width="8" 
        color="#1890ff" 
        active 
        border-radius="4"
      />
    </view>
  </view>

  <view class="section-title">{{t['task.detail.core_info']}}</view>
  <view class="info-card">
    <view class="info-item">
      <text class="label">{{t['task.detail.assignee']}}</text>
      <text class="value">{{task.assignedToName || t['task.detail.unassigned']}}</text>
    </view>
    <view class="info-item">
      <text class="label">{{t['task.detail.priority_label']}}</text>
      <text class="priority-tag priority-{{task.priority}}">{{priorityMap[task.priority]}}</text>
    </view>
    <view class="info-item" wx:if="{{task.projectName}}">
      <text class="label">{{t['task.detail.project']}}</text>
      <text class="value">{{task.projectName}}</text>
    </view>
    <view class="info-item">
      <text class="label">{{t['task.detail.planned_end']}}</text>
      <text class="value">{{task.plannedEndTime || '-'}}</text>
    </view>
  </view>

  <view class="section-title">{{t['task.detail.description']}}</view>
  <view class="info-card">
    <view class="info-item vertical">
      <text class="value">{{task.description || t['task.detail.no_description']}}</text>
    </view>
  </view>

  <view class="section-title">{{t['task.detail.timeline']}}</view>
  <view class="info-card">
    <view class="info-item">
      <text class="label">{{t['task.detail.created_at']}}</text>
      <text class="value">{{task.createdAt || '-'}}</text>
    </view>
    <view class="info-item">
      <text class="label">{{t['task.detail.started_at']}}</text>
      <text class="value">{{task.actualStartTime || '-'}}</text>
    </view>
    <view class="info-item">
      <text class="label">{{t['task.detail.completed_at']}}</text>
      <text class="value">{{task.actualEndTime || '-'}}</text>
    </view>
  </view>

  <view class="bottom-padding"></view>
</view>

<view class="loading-state" wx:else>
  <view class="loading-icon"></view>
  <text>{{t['task.detail.loading']}}</text>
</view>
