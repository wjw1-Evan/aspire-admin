# 🚀 v3.1 快速开始指南

## 欢迎使用 v3.1 多企业隶属架构！

v3.1 带来了全新的多企业管理体验：
- ✅ 自助注册，自动创建个人企业
- ✅ 简化登录，无需记住企业代码
- ✅ 灵活切换，在多个企业间自由切换
- ✅ 申请加入，搜索并加入其他企业

---

## 📦 快速启动

### 1. 启动应用

```bash
cd /Volumes/thinkplus/Projects/aspire-admin

# 启动应用
dotnet run --project Platform.AppHost

# 等待3分钟（数据迁移+初始化）
```

**首次启动会执行**:
- ✅ v3.1 数据迁移
- ✅ 创建数据库索引
- ✅ 初始化默认数据

**访问地址**:
- 🌐 管理后台: http://localhost:15001
- 📚 API文档: http://localhost:15000/scalar/v1
- 📊 Aspire Dashboard: http://localhost:15003

---

## 👤 注册新用户

### 访问注册页面

```
http://localhost:15001/user/register
```

### 填写表单

| 字段 | 说明 | 示例 |
|------|------|------|
| **用户名** | 全局唯一，3-50字符 | `john` |
| **邮箱** | 可选，用于找回密码 | `john@example.com` |
| **密码** | 至少6个字符 | `John@123` |

### 系统自动完成

注册成功后，系统会自动为您：
- ✅ 创建用户账号
- ✅ 创建个人企业（"john 的企业"）
- ✅ 配置32个默认权限
- ✅ 创建管理员角色
- ✅ 创建3个默认菜单
- ✅ 设置您为企业管理员

### 提示信息

```
✓ 注册成功！已为您创建个人企业。
```

---

## 🔐 登录系统

### 访问登录页面

```
http://localhost:15001/user/login
```

### 填写表单

| 字段 | 说明 | 示例 |
|------|------|------|
| **用户名** | 您注册的用户名 | `john` |
| **密码** | 您的密码 | `John@123` |

**注意**: ✅ 不再需要输入企业代码！

### 登录成功

- 自动进入您的个人企业
- 看到默认菜单：仪表板、用户管理、系统设置
- Header右侧显示企业切换器

---

## 🏢 企业切换

### 查看我的企业

点击 Header 右上角的企业名称，展开下拉菜单：

```
● john 的企业 [个人] [管理员] ← 当前
○ ABC科技有限公司 [员工]
○ XYZ创业公司 [开发]
────────────────────────
[+] 加入其他企业
```

### 切换企业

1. 点击目标企业
2. 系统切换到该企业
3. 页面自动刷新
4. 显示新企业的数据和菜单

### 标签说明

- **[个人]**: 您的个人企业
- **[管理员]**: 您是该企业的管理员
- **[员工]**: 您的角色名称

---

## 🔍 搜索企业

### 访问搜索页面

方式1: 点击企业切换器中的"加入其他企业"  
方式2: 直接访问 http://localhost:15001/company/search

### 搜索企业

1. 输入企业名称或代码
2. 点击"搜索"按钮
3. 查看搜索结果

### 企业卡片

每个企业显示：
- 🏢 企业名称
- 🔢 企业代码
- 👥 成员数量
- ✅ 状态标签（已加入/审核中）
- 🔘 操作按钮

### 申请加入

1. 点击"申请加入"按钮
2. 填写申请理由（可选）
3. 提交申请
4. 等待管理员审核

---

## 📋 我的申请

### 访问我的申请页面

```
http://localhost:15001/join-requests/my
```

### 查看申请状态

| 状态 | 说明 | 可用操作 |
|------|------|----------|
| ⏳ 待审核 | 等待管理员审核 | 可撤回 |
| ✅ 已通过 | 申请已通过，可切换企业 | - |
| ❌ 已拒绝 | 申请被拒绝，查看拒绝理由 | - |
| ○ 已撤回 | 您主动撤回 | - |

### 撤回申请

1. 找到待审核的申请
2. 点击"撤回"按钮
3. 确认撤回

---

## 👨‍💼 审核申请（管理员）

### 访问审核页面

```
http://localhost:15001/join-requests/pending
```

**权限**: 需要是企业管理员

### 查看待审核申请

列表显示：
- 申请人姓名和邮箱
- 申请理由
- 申请时间

### 审核操作

**通过申请**:
1. 点击"通过"按钮
2. 确认通过
3. 用户成为企业成员

**拒绝申请**:
1. 点击"拒绝"按钮
2. 填写拒绝理由
3. 提交拒绝

---

## 🎯 常见场景

### 场景1: 个人使用

```
注册 → 登录 → 使用个人企业

适合:
- 个人项目管理
- 学习和测试
- 小型团队（≤50人）
```

### 场景2: 加入公司

```
注册 → 登录 → 搜索公司 → 申请加入 → 等待审核 → 切换到公司

适合:
- 加入现有企业
- 员工入职
- 协作开发
```

### 场景3: 多企业协作

```
注册 → 创建企业1 → 加入企业2 → 加入企业3 → 自由切换

适合:
- 多项目管理
- 跨企业协作
- 顾问/自由职业者
```

---

## ⚙️ 管理功能

### 用户管理

路径: 用户管理 > 用户列表

功能:
- 查看企业成员
- 添加新用户
- 分配角色
- 停用/删除用户

### 角色管理

路径: 系统管理 > 角色管理

功能:
- 创建自定义角色
- 分配权限
- 设置菜单访问

### 企业设置

路径: 系统管理 > 企业设置

功能:
- 修改企业信息
- 上传企业Logo
- 配置企业参数

---

## 🔧 API测试

### 访问API文档

```
http://localhost:15000/scalar/v1
```

### 常用API端点

**认证**:
- POST /api/register - 注册
- POST /api/login/account - 登录

**企业**:
- GET /api/company/search - 搜索企业
- GET /api/company/my-companies - 我的企业
- POST /api/company/switch - 切换企业

**申请**:
- POST /api/join-request - 申请加入
- GET /api/join-request/my-requests - 我的申请
- POST /api/join-request/{id}/approve - 审核通过
- POST /api/join-request/{id}/reject - 拒绝申请

---

## ❓ 常见问题

### Q1: 忘记密码怎么办？

**A**: 暂不支持找回密码，请联系管理员重置。

### Q2: 如何邀请成员加入企业？

**A**: 
方式1: 告知企业代码，让对方搜索并申请
方式2: 管理员直接创建用户账号

### Q3: 可以同时属于多少个企业？

**A**: 无限制，可以加入任意数量的企业。

### Q4: 如何退出企业？

**A**: 目前需要联系企业管理员移除您。

### Q5: 个人企业可以删除吗？

**A**: 不建议删除，个人企业作为您的默认工作空间。

---

## 🆘 获取帮助

### 文档资源

- [完整实施报告](V3.1-IMPLEMENTATION-COMPLETE.md)
- [多企业隶属设计](docs/features/MULTI-COMPANY-MEMBERSHIP-DESIGN.md)
- [API文档](http://localhost:15000/scalar/v1)

### 问题反馈

如遇到问题，请查看：
- Aspire Dashboard: http://localhost:15003
- 后端日志
- 浏览器控制台

---

## 🎉 开始使用

**现在您可以开始使用 v3.1 了！**

1. ✅ 启动应用
2. ✅ 注册账号
3. ✅ 登录系统
4. ✅ 探索功能
5. ✅ 加入企业
6. ✅ 自由切换

**祝您使用愉快！** 🚀

