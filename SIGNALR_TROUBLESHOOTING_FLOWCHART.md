# SignalR åå•†å¤±è´¥ - æ•…éšœæ’é™¤æµç¨‹å›¾

## ğŸ¯ å¿«é€Ÿè¯Šæ–­æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SignalR åå•†å¤±è´¥: "<!DOCTYPE" is not valid JSON           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 1: å¯ç”¨è°ƒè¯•æ¨¡å¼                                        â”‚
â”‚ åœ¨ main.tsx ä¸­è°ƒç”¨:                                        â”‚
â”‚ enableAllSignalRDebug()                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 2: æ‰“å¼€æµè§ˆå™¨ DevTools (F12)                          â”‚
â”‚ åˆ‡æ¢åˆ° Console æ ‡ç­¾                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ­¥éª¤ 3: æ‰§è¡Œè¯Šæ–­å‘½ä»¤                                        â”‚
â”‚ __signalrDebug.checkTokenValidity()                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Token ä¸å­˜åœ¨ï¼Ÿ â”‚        â”‚ Token æœ‰æ•ˆï¼Ÿ  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                       â”‚
                â–¼                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ âŒ ç”¨æˆ·æœªç™»å½• â”‚        â”‚ âœ… ç»§ç»­      â”‚
        â”‚ é‡æ–°ç™»å½•     â”‚        â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ æ­¥éª¤ 4: æµ‹è¯•åå•†è¯·æ±‚          â”‚
                        â”‚ __signalrDebug.testSignalR    â”‚
                        â”‚ Negotiate(hubUrl)             â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                       â–¼                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ è¿”å› JSONï¼Ÿ   â”‚        â”‚ è¿”å› HTMLï¼Ÿ   â”‚        â”‚ è¿”å› 401ï¼Ÿ    â”‚
        â”‚ âœ… æˆåŠŸ      â”‚        â”‚ âŒ è®¤è¯å¤±è´¥   â”‚        â”‚ âŒ Tokenæ— æ•ˆ  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                       â”‚                       â”‚
                â–¼                       â–¼                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ é—®é¢˜å·²è§£å†³   â”‚        â”‚ æ£€æŸ¥:        â”‚        â”‚ æ£€æŸ¥:        â”‚
        â”‚ âœ¨ å®Œæˆ      â”‚        â”‚ 1. Tokenæ˜¯å¦ â”‚        â”‚ 1. Tokenæ ¼å¼ â”‚
        â”‚              â”‚        â”‚    æ­£ç¡®ä¼ é€’  â”‚        â”‚ 2. Tokenç­¾å â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ 2. æœåŠ¡å™¨æ—¥å¿—â”‚        â”‚ 3. JWTå¯†é’¥   â”‚
                                â”‚ 3. CORSé…ç½®  â”‚        â”‚ 4. æœåŠ¡å™¨æ—¥å¿—â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ è¯¦ç»†è¯Šæ–­è¡¨

### è¯Šæ–­å‘½ä»¤åŠé¢„æœŸè¾“å‡º

#### 1ï¸âƒ£ æ£€æŸ¥ Token æœ‰æ•ˆæ€§

**å‘½ä»¤ï¼š**
```javascript
__signalrDebug.checkTokenValidity()
```

**é¢„æœŸè¾“å‡ºï¼ˆæœ‰æ•ˆï¼‰ï¼š**
```javascript
{
  status: 'âœ…',
  message: 'Token æœ‰æ•ˆ',
  token: {
    payload: { 
      sub: 'user123',
      exp: 1701518400,
      iat: 1701432000,
      // ... å…¶ä»–å­—æ®µ
    },
    expiresAt: '2025-12-02T10:00:00.000Z',
    isExpired: false,
    timeToExpire: '3600s',
    isValid: true
  }
}
```

**é¢„æœŸè¾“å‡ºï¼ˆæ— æ•ˆï¼‰ï¼š**
```javascript
{
  status: 'âŒ',
  message: 'Token ä¸å­˜åœ¨',
  token: null
}
```

**é¢„æœŸè¾“å‡ºï¼ˆå·²è¿‡æœŸï¼‰ï¼š**
```javascript
{
  status: 'âŒ',
  message: 'Token å·²è¿‡æœŸ',
  token: {
    payload: { /* ... */ },
    expiresAt: '2025-12-01T10:00:00.000Z',
    isExpired: true,
    timeToExpire: '-3600s',
    isValid: false
  }
}
```

---

#### 2ï¸âƒ£ æµ‹è¯•åå•†è¯·æ±‚

**å‘½ä»¤ï¼š**
```javascript
__signalrDebug.testSignalRNegotiate('http://localhost:15001/hubs/notification')
```

**é¢„æœŸè¾“å‡ºï¼ˆæˆåŠŸï¼‰ï¼š**
```javascript
{
  success: true,
  data: {
    connectionId: 'abc123...',
    availableTransports: [
      { transport: 'WebSockets', transferFormats: ['Text', 'Binary'] },
      { transport: 'LongPolling', transferFormats: ['Text'] }
    ]
  }
}
```

**é¢„æœŸè¾“å‡ºï¼ˆè®¤è¯å¤±è´¥ï¼‰ï¼š**
```javascript
{
  success: false,
  error: 'HTTP 401',
  response: '<!DOCTYPE html>...'  // HTML é”™è¯¯é¡µé¢
}
```

**é¢„æœŸè¾“å‡ºï¼ˆCORS è¢«æ‹’ç»ï¼‰ï¼š**
```javascript
{
  success: false,
  error: 'HTTP 403',
  response: '<!DOCTYPE html>...'  // HTML é”™è¯¯é¡µé¢
}
```

---

#### 3ï¸âƒ£ æ‰“å°å®Œæ•´è¯Šæ–­

**å‘½ä»¤ï¼š**
```javascript
__signalrDebug.printSignalRDiagnostics()
```

**é¢„æœŸè¾“å‡ºï¼š**
```
ğŸ” SignalR è¯Šæ–­ä¿¡æ¯
  1ï¸âƒ£ Token æ£€æŸ¥
    çŠ¶æ€: âœ… Token æœ‰æ•ˆ
    Token ä¿¡æ¯: { payload, expiresAt, isExpired, ... }
  
  2ï¸âƒ£ æµè§ˆå™¨ä¿¡æ¯
    User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)...
    WebSocket æ”¯æŒ: true
    Fetch æ”¯æŒ: true
  
  3ï¸âƒ£ SignalR é…ç½®
    ç¯å¢ƒ: development
    API åŸºç¡€ URL: http://localhost:15001
```

---

## ğŸ” æŒ‰ç—‡çŠ¶è¯Šæ–­

### ç—‡çŠ¶ 1: "<!DOCTYPE" é”™è¯¯

```
é”™è¯¯ä¿¡æ¯:
  FailedToNegotiateWithServerError: Failed to complete negotiation 
  with the server: SyntaxError: Unexpected token '<', "<!DOCTYPE"

è¯Šæ–­æ­¥éª¤:
  1. __signalrDebug.checkTokenValidity()
     â”œâ”€ Token ä¸å­˜åœ¨ï¼Ÿ â†’ é‡æ–°ç™»å½•
     â”œâ”€ Token å·²è¿‡æœŸï¼Ÿ â†’ åˆ·æ–° Token
     â””â”€ Token æœ‰æ•ˆï¼Ÿ â†’ ç»§ç»­

  2. __signalrDebug.testSignalRNegotiate(hubUrl)
     â”œâ”€ è¿”å› JSONï¼Ÿ â†’ é—®é¢˜å·²è§£å†³
     â”œâ”€ è¿”å› HTMLï¼Ÿ â†’ æŸ¥çœ‹æµè§ˆå™¨ DevTools
     â””â”€ è¿”å› 401/403ï¼Ÿ â†’ æ£€æŸ¥è®¤è¯/CORS

  3. æ‰“å¼€æµè§ˆå™¨ DevTools
     â”œâ”€ Network æ ‡ç­¾ â†’ æŸ¥çœ‹ /negotiate è¯·æ±‚
     â”œâ”€ æŸ¥çœ‹å“åº”å¤´ â†’ æ£€æŸ¥ Content-Type
     â””â”€ æŸ¥çœ‹å“åº”ä½“ â†’ æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

  4. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
     â””â”€ dotnet watch è¾“å‡º â†’ æŸ¥æ‰¾é”™è¯¯ä¿¡æ¯
```

---

### ç—‡çŠ¶ 2: Token ä¸å­˜åœ¨

```
è¯Šæ–­è¾“å‡º:
  checkTokenValidity() â†’ { status: 'âŒ', message: 'Token ä¸å­˜åœ¨' }

å¯èƒ½åŸå› :
  1. ç”¨æˆ·æœªç™»å½•
  2. Token æœªæ­£ç¡®ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
  3. tokenUtils.getToken() å®ç°æœ‰é—®é¢˜

è§£å†³æ­¥éª¤:
  1. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
     â””â”€ æŸ¥çœ‹ç™»å½•é¡µé¢æ˜¯å¦æ˜¾ç¤º
  
  2. æ£€æŸ¥æœ¬åœ°å­˜å‚¨
     â””â”€ æ‰“å¼€ DevTools â†’ Application â†’ Local Storage
     â””â”€ æŸ¥æ‰¾ token/auth ç›¸å…³çš„é”®
  
  3. é‡æ–°ç™»å½•
     â””â”€ æ¸…é™¤æœ¬åœ°å­˜å‚¨
     â””â”€ é‡æ–°ç™»å½•è·å–æ–° Token
  
  4. éªŒè¯ Token å·²ä¿å­˜
     â””â”€ å†æ¬¡æ‰§è¡Œ checkTokenValidity()
```

---

### ç—‡çŠ¶ 3: Token å·²è¿‡æœŸ

```
è¯Šæ–­è¾“å‡º:
  checkTokenValidity() â†’ { status: 'âŒ', message: 'Token å·²è¿‡æœŸ' }

å¯èƒ½åŸå› :
  1. Token çš„ exp æ—¶é—´å·²è¿‡
  2. ç³»ç»Ÿæ—¶é—´ä¸åŒæ­¥
  3. Token åˆ·æ–°æœºåˆ¶æœªå®ç°

è§£å†³æ­¥éª¤:
  1. æ£€æŸ¥ç³»ç»Ÿæ—¶é—´
     â””â”€ ç¡®ä¿ç³»ç»Ÿæ—¶é—´æ­£ç¡®
  
  2. å®ç° Token åˆ·æ–°æœºåˆ¶
     â””â”€ åœ¨ Token è¿‡æœŸå‰è‡ªåŠ¨åˆ·æ–°
     â””â”€ æˆ–åœ¨æ”¶åˆ° 401 æ—¶åˆ·æ–°
  
  3. é‡æ–°ç™»å½•
     â””â”€ è·å–æ–°çš„æœ‰æ•ˆ Token
  
  4. éªŒè¯ Token æœ‰æ•ˆæ€§
     â””â”€ å†æ¬¡æ‰§è¡Œ checkTokenValidity()
```

---

### ç—‡çŠ¶ 4: åå•†è¿”å› 401

```
è¯Šæ–­è¾“å‡º:
  testSignalRNegotiate() â†’ { success: false, error: 'HTTP 401' }

å¯èƒ½åŸå› :
  1. Token æ ¼å¼é”™è¯¯
  2. Token ç­¾åæ— æ•ˆ
  3. Token æœªæ­£ç¡®ä¼ é€’ç»™æœåŠ¡å™¨
  4. æœåŠ¡å™¨ JWT å¯†é’¥é…ç½®é”™è¯¯

è§£å†³æ­¥éª¤:
  1. éªŒè¯ Token æ ¼å¼
     â””â”€ Token åº”è¯¥æ˜¯ xxx.yyy.zzz ä¸‰éƒ¨åˆ†
     â””â”€ æ‰§è¡Œ: __signalrDebug.parseJWT(token)
  
  2. æ£€æŸ¥ Token ä¼ é€’
     â””â”€ æ‰“å¼€ DevTools â†’ Network
     â””â”€ æŸ¥çœ‹ /negotiate è¯·æ±‚
     â””â”€ æ£€æŸ¥ Authorization å¤´æˆ– query string
  
  3. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
     â””â”€ dotnet watch è¾“å‡º
     â””â”€ æŸ¥æ‰¾ "[SignalR Auth]" ç›¸å…³æ—¥å¿—
  
  4. æ£€æŸ¥æœåŠ¡å™¨ JWT é…ç½®
     â””â”€ ç¡®ä¿ JWT å¯†é’¥åŒ¹é…
     â””â”€ ç¡®ä¿ Issuer/Audience é…ç½®æ­£ç¡®
```

---

### ç—‡çŠ¶ 5: CORS é”™è¯¯

```
æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯:
  Access to XMLHttpRequest at 'http://localhost:15001/...' 
  from origin 'http://localhost:15000' has been blocked by CORS policy

å¯èƒ½åŸå› :
  1. å®¢æˆ·ç«¯ URL ä¸åœ¨ AllowedOrigins ä¸­
  2. CORS é¢„æ£€è¯·æ±‚è¢«æ‹’ç»
  3. ç¼ºå°‘ AllowCredentials() é…ç½®

è§£å†³æ­¥éª¤:
  1. æ£€æŸ¥ CORS é…ç½®
     â””â”€ æ‰“å¼€ Program.cs
     â””â”€ æŸ¥çœ‹ AllowedOrigins é…ç½®
     â””â”€ ç¡®ä¿åŒ…å«å®¢æˆ·ç«¯ URL
  
  2. ç¡®ä¿å¯ç”¨å‡­è¯æ”¯æŒ
     â””â”€ æ£€æŸ¥æ˜¯å¦è°ƒç”¨äº† AllowCredentials()
  
  3. é‡å¯æœåŠ¡å™¨
     â””â”€ åœæ­¢ dotnet watch
     â””â”€ é‡æ–°å¯åŠ¨
  
  4. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
     â””â”€ æŒ‰ Ctrl+Shift+Delete
     â””â”€ æ¸…é™¤æ‰€æœ‰ç¼“å­˜
     â””â”€ åˆ·æ–°é¡µé¢
```

---

## ğŸ› ï¸ ä¿®å¤æ£€æŸ¥æ¸…å•

### å®¢æˆ·ç«¯ä¿®å¤

- [ ] å·²å¯ç”¨è°ƒè¯•æ¨¡å¼ (`enableAllSignalRDebug()`)
- [ ] Token å­˜åœ¨ä¸”æœ‰æ•ˆ (`checkTokenValidity()`)
- [ ] åå•†è¯·æ±‚è¿”å› JSON (`testSignalRNegotiate()`)
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ—  CORS é”™è¯¯
- [ ] å·²æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- [ ] å·²å°è¯•é‡æ–°ç™»å½•

### æœåŠ¡å™¨ä¿®å¤

- [ ] SignalR å·²é…ç½® (`AddSignalR()`)
- [ ] CORS å·²é…ç½® (`AddCors()`)
- [ ] JWT è®¤è¯å·²é…ç½® (`AddAuthentication()`)
- [ ] Hub å·²æ˜ å°„ (`MapHub()`)
- [ ] å®¢æˆ·ç«¯ URL åœ¨ `AllowedOrigins` ä¸­
- [ ] `AllowCredentials()` å·²å¯ç”¨
- [ ] æœåŠ¡å™¨å·²é‡å¯

### ç½‘ç»œä¿®å¤

- [ ] æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ (`dotnet watch` æ˜¾ç¤º "Build succeeded")
- [ ] å®¢æˆ·ç«¯å¯ä»¥è®¿é—®æœåŠ¡å™¨ URL
- [ ] é˜²ç«å¢™æœªé˜»æ­¢è¿æ¥
- [ ] ä»£ç†æœªå¹²æ‰°è¯·æ±‚

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé—®é¢˜ä»æœªè§£å†³ï¼Œè¯·æ”¶é›†ä»¥ä¸‹ä¿¡æ¯ï¼š

### 1. è¯Šæ–­è¾“å‡º
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ
__signalrDebug.printSignalRDiagnostics()
__signalrDebug.checkTokenValidity()
__signalrDebug.testSignalRNegotiate('http://localhost:15001/hubs/notification')
```

### 2. Network æ ‡ç­¾ä¿¡æ¯
- æ‰“å¼€ DevTools â†’ Network æ ‡ç­¾
- åˆ·æ–°é¡µé¢
- æŸ¥æ‰¾ `/negotiate` è¯·æ±‚
- æˆªå›¾è¯·æ±‚å¤´å’Œå“åº”

### 3. æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—
- æ‰“å¼€ DevTools â†’ Console æ ‡ç­¾
- å¤åˆ¶æ‰€æœ‰ SignalR ç›¸å…³çš„æ—¥å¿—

### 4. æœåŠ¡å™¨æ—¥å¿—
- å¤åˆ¶ `dotnet watch` çš„å®Œæ•´è¾“å‡º
- ç‰¹åˆ«æ˜¯ SignalR ç›¸å…³çš„é”™è¯¯

### 5. ç¯å¢ƒä¿¡æ¯
- æµè§ˆå™¨ç‰ˆæœ¬
- æ“ä½œç³»ç»Ÿ
- ç½‘ç»œç¯å¢ƒï¼ˆæ˜¯å¦åœ¨ä»£ç†åé¢ï¼‰

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å§‹ç»ˆå¯ç”¨è°ƒè¯•æ¨¡å¼**
   - åœ¨å¼€å‘ç¯å¢ƒå¯ç”¨è¯¦ç»†æ—¥å¿—
   - ä¾¿äºå¿«é€Ÿå®šä½é—®é¢˜

2. **å®šæœŸæ£€æŸ¥ Token**
   - åœ¨å…³é”®æ“ä½œå‰éªŒè¯ Token
   - é˜²æ­¢å›  Token è¿‡æœŸå¯¼è‡´çš„é—®é¢˜

3. **ä½¿ç”¨ DevTools**
   - Network æ ‡ç­¾æŸ¥çœ‹å®é™…è¯·æ±‚
   - Console æ ‡ç­¾æŸ¥çœ‹æ—¥å¿—

4. **æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—**
   - æœåŠ¡å™¨æ—¥å¿—é€šå¸¸åŒ…å«å…³é”®ä¿¡æ¯
   - å¸®åŠ©å¿«é€Ÿå®šä½é—®é¢˜

5. **ä¿å­˜è¯Šæ–­ä¿¡æ¯**
   - ä¾¿äºé—®é¢˜æ’æŸ¥
   - ä¾¿äºä¸å¼€å‘äººå‘˜æ²Ÿé€š

---

## ğŸ¯ æ€»ç»“

é€šè¿‡ä»¥ä¸Šè¯Šæ–­æµç¨‹ï¼Œä½ å¯ä»¥å¿«é€Ÿå®šä½å’Œè§£å†³ SignalR åå•†å¤±è´¥é—®é¢˜ï¼š

âœ… **å¿«é€Ÿè¯Šæ–­** - 5 åˆ†é’Ÿå†…å®šä½é—®é¢˜  
âœ… **è¯¦ç»†æŒ‡å¯¼** - æ¸…æ™°çš„è§£å†³æ­¥éª¤  
âœ… **å®Œæ•´å·¥å…·** - å¼ºå¤§çš„è°ƒè¯•å·¥å…·  
âœ… **æœ€ä½³å®è·µ** - é¿å…å¸¸è§é—®é¢˜  

ç°åœ¨å¼€å§‹è¯Šæ–­å§ï¼ğŸš€

