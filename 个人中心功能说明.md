# 个人中心功能说明

## 功能概述

个人中心功能允许用户查看和编辑自己的个人信息，查看活动日志等。这是一个完整的用户个人资料管理功能。

## 功能特性

### 1. 个人信息展示
- 用户头像
- 用户名、姓名、邮箱、年龄
- 用户角色（管理员/普通用户）
- 账户状态（正常/禁用）
- 注册时间、最后更新时间、最后登录时间

### 2. 个人信息编辑
- 支持编辑用户名、姓名、邮箱、年龄
- 实时验证用户名和邮箱的唯一性
- 表单验证和错误提示

### 3. 活动日志
- 显示用户最近的活动记录
- 包括登录、退出、更新资料、修改密码等操作
- 显示操作时间、IP地址等信息

### 4. 安全特性
- 所有API接口都需要JWT认证
- 用户只能查看和修改自己的信息
- 密码修改需要验证当前密码

## 技术实现

### 后端实现

#### 新增API接口
- `GET /api/user/profile` - 获取当前用户信息
- `PUT /api/user/profile` - 更新当前用户信息
- `PUT /api/user/profile/password` - 修改当前用户密码
- `GET /api/user/profile/activity-logs` - 获取用户活动日志

#### 新增模型
- `UpdateProfileRequest` - 更新用户信息请求模型
- `UserActivityLog` - 用户活动日志模型

#### 新增服务方法
- `UpdateUserProfileAsync` - 更新用户资料
- `ChangePasswordAsync` - 修改密码
- `LogUserActivityAsync` - 记录用户活动

### 前端实现

#### 新增页面
- `/account/center` - 个人中心页面

#### 新增API服务
- `getCurrentUserProfile` - 获取用户信息
- `updateUserProfile` - 更新用户信息
- `changeCurrentUserPassword` - 修改密码
- `getUserActivityLogs` - 获取活动日志

#### 新增类型定义
- `UpdateProfileParams` - 更新用户信息参数类型
- `UserActivityLog` - 用户活动日志类型

## 使用方法

### 1. 访问个人中心
- 点击右上角用户头像下拉菜单
- 选择"个人中心"选项
- 或直接访问 `/account/center` 路径

### 2. 编辑个人信息
- 点击"编辑资料"按钮
- 修改需要更新的字段
- 点击"保存"按钮提交更改

### 3. 查看活动日志
- 在个人中心页面底部查看"最近活动"部分
- 显示用户最近的操作记录

## 路由配置

```typescript
{
  name: 'account.center',
  path: '/account/center',
  component: './account/center',
  hideInMenu: true,
}
```

## 国际化支持

所有文本都支持国际化，中文翻译已添加到 `src/locales/zh-CN/pages.ts` 文件中。

## 安全考虑

1. **认证保护**: 所有个人中心相关API都需要JWT认证
2. **权限控制**: 用户只能访问自己的信息
3. **数据验证**: 前端和后端都有数据验证
4. **活动记录**: 记录用户的重要操作，便于审计

## 扩展建议

1. **头像上传**: 可以添加头像上传功能
2. **更多个人信息**: 可以添加更多用户信息字段
3. **隐私设置**: 可以添加隐私设置功能
4. **通知设置**: 可以添加通知偏好设置
5. **安全设置**: 可以添加两步验证等安全功能

## 文件结构

```
Platform.Web/src/pages/account/center/
├── index.tsx                 # 个人中心主页面

Platform.ApiService/
├── Controllers/UserController.cs    # 用户控制器（新增个人中心API）
├── Models/User.cs                   # 用户模型（新增相关模型）
└── Services/UserService.cs          # 用户服务（新增相关方法）
```

## 测试建议

1. 测试用户信息获取和显示
2. 测试用户信息编辑功能
3. 测试表单验证
4. 测试活动日志显示
5. 测试权限控制
6. 测试错误处理
